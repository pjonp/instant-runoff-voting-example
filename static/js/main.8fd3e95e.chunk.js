(this["webpackJsonpinstant-runoff-voting-example"]=this["webpackJsonpinstant-runoff-voting-example"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('[{"num":"1st","name":"First"},{"num":"2nd","name":"Second"},{"num":"3rd","name":"Third"},{"num":"4th","name":"Fourth"},{"num":"5th","name":"Fifth"},{"num":"6th","name":"Sixth"},{"num":"7th","name":"Seventh"},{"num":"8th","name":"Eighth"},{"num":"9th","name":"Nineth"}]')},12:function(e,t,n){e.exports=n(17)},17:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),i=n.n(r),l=n(2),c=n(3),s=n(4),u=n(6),m=n(5),d=n(1),f=n(7),h=n(8),v=n(10),p=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=h.map((function(e,t){return o.a.createElement("div",{className:"ballotInfoOrder",key:t+"option",style:{width:100/h.length+"%"}},o.a.createElement("div",{className:"ballotInfoOrderName"},o.a.createElement("p",null,v[t].name)),o.a.createElement("div",{className:"ballotInfoOrderNumber"},o.a.createElement("p",null,v[t].num)))})),n=h.map((function(t,n){var a=h.map((function(n,a){var r=[a,t.id],i={backgroundColor:e.props.currentVote.some((function(e){return e[0]===r[0]&&e[1]===r[1]}))?"black":"white",display:e.props.currentVote.some((function(e){return e[0]!==r[0]&&e[1]===r[1]}))?"none":e.props.currentVote.length<r[0]?"none":null},l={width:100/h.length+"%",backgroundColor:e.props.currentVote.some((function(e){return e[0]===r[0]||e[1]===r[1]}))?"AliceBlue":e.props.currentVote.length===r[0]?"MediumSeaGreen":null};return o.a.createElement("div",{className:"ballotChoicesBubblesBox",key:"bubble"+a+t.id,style:l},o.a.createElement("div",{id:r,className:"ballotChoicesBubble",onClick:e.props.clickBubble,style:i}))})),r={backgroundColor:"".concat(t.color)};return o.a.createElement("div",{className:"containerRow",key:t.name},o.a.createElement("div",{className:"ballotChoiceNameBox"},o.a.createElement("p",{className:"ballotChoiceName",style:r,onClick:e.props.clickName,id:"".concat(t.id,"clickName")},t.name)),a)}));return o.a.createElement("div",{id:"ballotContainer"},o.a.createElement("div",{className:"contentTitle"},o.a.createElement("h1",null,"RANKED CHOICE VOTING EXAMPLE")),o.a.createElement("div",{className:"contentInfo"},o.a.createElement("div",{className:"ballotInfoText"},o.a.createElement("p",null,"Rank up to 7 colors!")),o.a.createElement("div",{className:"ballotInfoOrderContatiner"},t)),o.a.createElement("div",{className:"contentData"},n),o.a.createElement("div",{className:"contentNav"},o.a.createElement("h3",{className:"contentNavStatus"},this.props.currentVote.length<h.length?"Make your ".concat(v[this.props.currentVote.length].num," Choice Or Press Submit!"):"Press Submit!"),o.a.createElement("div",{className:"contentNavButtonContainer"},o.a.createElement("span",{className:"contentNavButton",onClick:this.props.undoBallot},"UNDO"),o.a.createElement("span",{className:"contentNavButton",onClick:this.props.clearBallot,style:{backgroundColor:"#fa3c92"}},"RESET ALL VOTES"),o.a.createElement("span",{className:"contentNavButton",onClick:this.props.submitBallot},"SUBMIT"))))}}]),t}(a.Component),b=n(8),N=n(10),E=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.userVote,t=this.props.finalResults,n=this.props.round,a=this.props.roundVisual,r=e.length>0?e.map((function(a,r){var i={backgroundColor:b.filter((function(e){return e.id===a[1]}))[0].color,maxWidth:95/e.length+"%",width:"25%",fontSize:e.length<6?"14px":"12px"};return o.a.createElement("div",{className:"userVote",key:r+"option",style:i},o.a.createElement("div",{className:"userVoteName"},o.a.createElement("p",null,b.filter((function(e){return e.id===a[1]}))[0].name)),o.a.createElement("div",{className:"userVoteNum"},o.a.createElement("p",null,N[r].num)),o.a.createElement("div",{className:"userVoteHide",style:{display:t[n-1].filter((function(e){return e.id===a[1]}))[0].eliminated>0?null:"none"}},o.a.createElement("p",{className:"userVoteHideX",id:"x"},"X")))})):o.a.createElement("div",{className:"userVote"},o.a.createElement("div",{className:"userVoteName"},o.a.createElement("p",null,"YOU DID NOT VOTE")),o.a.createElement("div",{className:"userVoteNum"},o.a.createElement("p",null,"SO TRUMP WINS"))),i=t[n-1].map((function(e){return o.a.createElement("div",{className:"containerRow",key:"result"+e.id},o.a.createElement("div",{className:"ballotChoiceNameBox",style:{backgroundColor:"white",border:0,borderRight:"3px solid black"}},o.a.createElement("p",{className:"ballotChoiceName",style:{backgroundColor:"".concat(b.filter((function(t){return e.id===t.id}))[0].color)}},b.filter((function(t){return e.id===t.id}))[0].name)),function(e){var r=e.winner?"WINS!":e.tie?"TIES!":"";if(3===a){var i,l=t[n-1].map((function(t){if(t.nextChoice){var n=t.nextChoice.filter((function(t){return t.id===e.id}));return n[0]?(i=[t.id,n[0].nextvotes],o.a.createElement("div",{key:"".concat(i[0],"addto").concat(e.id),className:"graphBar",style:{width:i[1]+"%",backgroundColor:b.filter((function(e){return i[0]===e.id}))[0].color}},o.a.createElement("div",{className:"graphBarVotes"},i[1]))):null}return null}));return e.eliminated!==n?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"".concat(e.id,"bar"),className:"graphBar",style:{width:e.votes+"%",backgroundColor:b.filter((function(t){return e.id===t.id}))[0].color}},o.a.createElement("div",{className:"graphBarVotes"},e.votes)),l):o.a.createElement("div",{id:"".concat(e.id,"bar"),className:"graphBar",style:{width:"70%",margin:"auto",backgroundColor:b.filter((function(t){return e.id===t.id}))[0].color}},o.a.createElement("div",{className:"graphBarVotes"},"".concat(e.votes," votes moved to next choice")))}return 1===a||e.eliminated!==n?o.a.createElement("div",{key:"".concat(e.id,"bar"),id:"".concat(e.id,"bar"),className:"graphBar",style:{width:e.votes+"%",backgroundColor:b.filter((function(t){return e.id===t.id}))[0].color}},o.a.createElement("div",{className:"graphBarVotes"},"".concat(e.votes," ").concat(r))):e.nextChoice.map((function(t){return o.a.createElement("div",{key:"".concat(e.id).concat(t.id," bar"),id:"".concat(e.id,"nextvote").concat(t.id),className:"graphBar",style:{width:t.nextvotes+"%",backgroundColor:b.filter((function(e){return t.id===e.id}))[0].color}},o.a.createElement("div",{className:"graphBarVotes"},t.nextvotes))}))}(e))}));return o.a.createElement("div",{id:"resultsContainer"},o.a.createElement("div",{className:"contentTitle"},o.a.createElement("h1",null,"RANKED CHOICE VOTING EXAMPLE")),o.a.createElement("div",{className:"contentInfo"},r),o.a.createElement("div",{className:"contentData",id:"results"},i),o.a.createElement("div",{className:"contentNav"},o.a.createElement("h3",{className:"contentNavStatus"},function(){var e=t[n-1].filter((function(e){return e.eliminated===n})).map((function(e){return e.id})).map((function(e){return b.filter((function(t){return e===t.id}))})).map((function(e){return e[0].name}));e.length>1&&(e=e.join(" & "));var o=t[n-1].filter((function(e){return e.winner})),r=t[n-1].filter((function(e){return e.tie}));return o[0]?"".concat(b.filter((function(e){return e.id===o[0].id}))[0].name," WINS!"):r[0]?"".concat(b.filter((function(e){return e.id===r[0].id}))[0].name," & ").concat(b.filter((function(e){return e.id===r[1].id}))[0].name," TIE!"):1===a?"".concat(e," Eliminated This Round"):2===a?"Next Choice Votes for ".concat(e):"".concat(e," Votes Moved")}()),o.a.createElement("div",{className:"contentNavButtonContainer"},o.a.createElement("span",{className:"contentNavButton",onClick:this.props.moveBack},"BACK"),o.a.createElement("span",{className:"contentNavButton",onClick:this.props.moveHome},"BACK TO BALLOT"),this.props.round<this.props.maxRounds&&o.a.createElement("span",{className:"contentNavButton",onClick:this.props.moveForward},"NEXT"))))}}]),t}(a.Component);function g(e){for(var t=e.map((function(e){return e.id})),n=t.length-1;n>=0;n--){var a=Math.floor((n+1)*Math.random()),o=t[a];t[a]=t[n],t[n]=o}return t}var k=[],B=[];function V(e,t,n){!function e(t,n,a){var o=[],r=[],i=[];o=1===n?t.map((function(e){return i.push([e[0],e]),e[0]})):t.map((function(e){for(var t=0;t<e.length;t++)if(-1===B.map((function(e){return e[0]})).indexOf(e[t]))return i.push([e[t],e]),e[t];return null}));o.sort(),o.map((function(e){if(!e)return null;if(-1===r.findIndex((function(t){return t.id===e}))){var t=o.lastIndexOf(e)-o.indexOf(e)+1,a={round:n,id:e,votes:t};return r.push(a),null}return null})),r.sort((function(e,t){return t.votes-e.votes}));for(var c=r.length,s=0;s<B.length;s++){var u={round:n,id:B[s][0],votes:0,eliminated:B[s][1]};r.push(u)}if(r[0].votes>t.length/2||1===c)return r[0].winner=!0,r[1]&&(r[1].eliminated=n),k.push(r),console.log("WINNER"),void a(k,n);if(2===c&&r[0].votes===r[1].votes)return r[0].tie=!0,r[1].tie=!0,k.push(r),console.log("TIE!"),void a(k,n);for(var m=c-1;m>0;m--)c>1&&r[c-1].votes===r[m].votes&&(r[m].eliminated=n,B.unshift([r[m].id,n]));for(var d=function(e){var t=Object(l.a)(B);if(c>1&&r[c-1].votes===r[e].votes){var n=i.filter((function(t){return t[0]===r[e].id})).map((function(e){for(var n=0;n<e[1].length;n++)if(-1===t.map((function(e){return e[0]})).indexOf(e[1][n]))return e[1][n];return null})).sort(),a=[];n.map((function(e){if(!e)return null;if(-1===a.findIndex((function(t){return t.id===e}))){var t=n.lastIndexOf(e)-n.indexOf(e)+1,o={id:e,nextvotes:t};return a.push(o),null}return null})),r[e].nextChoice=a}},f=c-1;f>0;f--)d(f);if(k.push(r),10===n)return console.log("something went wrong, too many rounds..."),void a(k,n);e(t,n+1,a)}(e,t,(function(e,t){k=[],B=[],n(e,t)}))}var O=n(8),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).submitBallot=function(){var e=[];if(n.state.allVotes[0]){if(n.state.votechange){var t=Object(l.a)(n.state.allVotes),a=n.state.userVote.map((function(e){return e[1]}));t.pop(),t.push(a),V(t,1,(function(e,a){n.setState({allVotes:t,votechange:!1,finalResults:e,maxRounds:a,roundVisual:1}),console.log("RESULTS Changed: ",e)}))}}else{for(var o=n.state.userVote.map((function(e){return e[1]})),r=0;r<99;r++)e.push(g(O));e.push(o),V(e,1,(function(t,a){n.setState({allVotes:e,votechange:!1,finalResults:t,maxRounds:a,roundVisual:1}),console.log("RESULTS: ",t)}))}n.moveForward()},n.state={userVote:[],votechange:!1,allVotes:[],finalResults:[],round:0,maxRounds:0,roundVisual:3},n.clickBubble=n.clickBubble.bind(Object(d.a)(n)),n.clickName=n.clickName.bind(Object(d.a)(n)),n.submitBallot=n.submitBallot.bind(Object(d.a)(n)),n.undoBallot=n.undoBallot.bind(Object(d.a)(n)),n.clearBallot=n.clearBallot.bind(Object(d.a)(n)),n.moveForward=n.moveForward.bind(Object(d.a)(n)),n.moveBack=n.moveBack.bind(Object(d.a)(n)),n.moveHome=n.moveHome.bind(Object(d.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"clickBubble",value:function(e){var t=e.target.id.split(",");t=[parseInt(t[0]),parseInt(t[1])];var n=Object(l.a)(this.state.userVote);n[t[0]]?n.length-1===t[0]&&n[t[0]][1]===t[1]?n.pop():n[t[0]]=t:n.push(t),this.setState({userVote:n,votechange:!0})}},{key:"clickName",value:function(e){var t=Object(l.a)(this.state.userVote),n=[t.length,parseInt(e.target.id)];if(n[0]>0&&t[n[0]-1][1]===n[1])t.pop();else{if(t.some((function(e){return e[1]===n[1]})))return"already voted for";t.push(n)}this.setState({userVote:t,votechange:!0})}},{key:"clearBallot",value:function(){this.setState({userVote:[],votechange:!0,allVotes:[],finalResults:[],maxRounds:0})}},{key:"undoBallot",value:function(){var e=Object(l.a)(this.state.userVote);e.pop(),this.setState({userVote:e,votechange:!0})}},{key:"moveForward",value:function(){var e=this.state.round,t=this.state.roundVisual;e+=t<3?0:1,t<3?t+=1:t=1,this.setState({round:e,roundVisual:t})}},{key:"moveBack",value:function(){var e=this.state.round,t=this.state.roundVisual;e-=t>1?0:1,t>1?t-=1:t=3,this.setState({round:e,roundVisual:t})}},{key:"moveHome",value:function(){this.setState({round:0,roundVisual:3})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{id:"contentContainer",className:"contentContainer"},0===this.state.round&&3===this.state.roundVisual&&o.a.createElement(p,{clickBubble:this.clickBubble,clickName:this.clickName,submitBallot:this.submitBallot,undoBallot:this.undoBallot,clearBallot:this.clearBallot,currentVote:this.state.userVote}),this.state.round>0&&o.a.createElement(E,{round:this.state.round,roundVisual:this.state.roundVisual,maxRounds:this.state.maxRounds,moveBack:this.moveBack,moveForward:this.moveForward,moveHome:this.moveHome,finalResults:this.state.finalResults,userVote:this.state.userVote})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e){e.exports=JSON.parse('[{"id":1,"name":"RED","color":"#ff6666","populartiy":10},{"id":2,"name":"ORANGE","color":"#ffc966","populartiy":10},{"id":3,"name":"YELLOW","color":"#ffff66","populartiy":8},{"id":4,"name":"GREEN","color":"#66ff66","populartiy":5},{"id":5,"name":"BLUE","color":"#4d4dff","populartiy":7},{"id":6,"name":"INDIGO","color":"#aa33ff","populartiy":1},{"id":7,"name":"VIOLET","color":"#ea62ea","populartiy":1}]')}},[[12,1,2]]]);
//# sourceMappingURL=main.8fd3e95e.chunk.js.map